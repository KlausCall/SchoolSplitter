{"version":3,"sources":["modules/Footer.tsx","domain/Course.ts","domain/CourseBlock.ts","domain/CourseCombination.ts","domain/Pupil.ts","domain/GradeLevel.ts","domain/solve/Move.ts","domain/solve/CombiDistribution.ts","domain/solve/ModeSwitchMove.ts","domain/solve/FinishMove.ts","domain/solve/LevelSlicer.ts","modules/ResultTable.tsx","modules/Result.tsx","modules/Input.tsx","modules/Navbar/HelpDialog.tsx","modules/Navbar.tsx","pages/App.tsx","index.tsx"],"names":["Footer","className","style","fontSize","process","href","Course","theNo","name","no","block","members","combinations","this","member","push","combi","aBlock","Error","length","other","some","p","includes","getIndex","combis","CourseBlock","courseList","self","forEach","c","setBlock","CourseCombination","courses","combiSize","connectedCombis","course","addCombination","otherCombis","Set","allMembers","getCombinations","add","getMembers","pupil","delete","Array","from","size","i","lo","count","contacts","getContacts","crossCombis","getName","Pupil","lastname","firstname","courseCombination","group","getCourses","GradeLevel","data","pupilList","combinationList","blockList","initFromData","pupilCourses","currentCourses","courseMap","Map","slice","fields","courseName","getCourse","addMember","initBlocks","sortCoursesByBlock","initCourseCombinations","orderedList","fill","j","getBlock","combiName","combiMap","nameForCourseList","has","get","set","setCourseCombination","initConnectedCombis","reduce","res","entry","concat","indices","seenPupil","blockCourses","blockNo","sort","a","b","getMemberCount","next","splice","sum","console","log","table","pupilTable","combiTable","courseTable","map","each","asLO","Move","combination","to","progress","slicer","revertMove","CombiDistribution","aCombi","aSlicer","courseIndices","memberCounts","combiSizes","connectedDistris","getSize","allDistris","getConnectedCombis","connected","undefined","_","resultList","weighter","courseSizes","maxSizes","sourceAdvantages","targetPenaltys","getCourseSizes","getMaxSizes","courseIdx","adv","pen","sources","targets","filter","every","advantageOnRemoveFrom","penaltyOnAddTo","fromIdx","toIdx","move","removeMemberFromSlice","addMemberToSlice","dist","cs","pupilsTable","pos","max","getMember","ModeSwitchMove","revertModeSwitch","FinishMove","revertFinish","LevelSlicer","aSize","aLevel","initializer","speed","moveTolerance","groupRestrict","groupTolerance","level","distributions","cfgString","moveRandom","reduceGroups","finished","moveList","moveSlowly","fillConnected","initRandomlyDistributed","initAllIntoFirstSlice","Math","ceil","iterations","best","optimize","current","currentContacts","getCombination","getCourseCombination","floor","random","doMove","candidateMoves","idx","findGroupSizeMoves","findContactMoves","pop","revert","revMove","groupSizes","siz","getOversize","setPupilsGroups","ResultTable","list","title","selections","setSelection","selectedRows","updateSelectedRow","keys","Object","csv","k","resO","obj","String","toString","dataURL","encodeURIComponent","display","download","onClick","ev","Result","holder","useState","selPupils","setSelPupils","selCourses","setSelCourses","selCombis","setSelCombis","provider","row","getLevel","allCombis","Input","gradeLevel","setGradeLevel","levelSlicer","setLevelSlicer","slicerState","setSlicerState","sliceCount","setSliceCount","setInitializer","setGroupRestrict","setGroupTolerance","setMove","setSpeed","relMoves","setRelMoves","setIterations","result","setResult","updateResult","htmlFor","inputId","cssInputClass","parserOptions","onFileLoaded","displayString","type","step","id","min","onChange","e","target","valueAsNumber","value","disabled","preventDefault","statusString","undoLastMove","configString","solve","HelpDialog","data-toggle","data-target","role","aria-labelledby","aria-hidden","data-dismiss","aria-label","Navbar","App","ReactDOM","render","StrictMode","document","querySelector"],"mappings":"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","file":"static/js/main.34e3170b.chunk.js","sourcesContent":["interface Props {}\n\nconst Footer: React.FC<Props> = () => (\n  <footer className=\"footer p-2 bg-light fixed-bottom text-center\">\n    <span className=\"text-muted\" style={{ fontSize: '0.875rem' }}>\n      SchoolSplitter {process.env.REACT_APP_VERSION} - (C) 2020 by KlausCall\n      &amp; Korki43 - MIT licensed - source hosted on{' '}\n      <a href=\"https://github.com/KlausCall/SchoolSplitter\">GitHub</a>\n    </span>\n  </footer>\n);\n\nexport default Footer;\n","import { CourseBlock } from './CourseBlock';\nimport { Pupil } from './Pupil';\nimport { CourseCombination } from './CourseCombination';\n\nexport class Course {\n  readonly no: number;\n  readonly name: string;\n  private block?: CourseBlock;\n  private members: Pupil[];\n  private combinations: CourseCombination[];\n\n  constructor(theNo: number, name: string) {\n    this.no = theNo;\n    this.name = name;\n    this.members = [];\n    this.combinations = [];\n  }\n\n  public addMember(member: Pupil) {\n    this.members.push(member);\n  }\n\n  public addCombination(combi: CourseCombination) {\n    this.combinations.push(combi);\n  }\n\n  public getIndex() {\n    return this.no;\n  }\n\n  public setBlock(aBlock: CourseBlock) {\n    this.block = aBlock;\n  }\n\n  public getBlock(): CourseBlock {\n    if (this.block) {\n      return this.block;\n    } else {\n      throw new Error('Block not set.');\n    }\n  }\n\n  public getMemberCount(): number {\n    return this.members.length;\n  }\n\n  public getMembers() {\n    return this.members;\n  }\n\n  public getName() {\n    return this.name;\n  }\n\n  public getCombinations() {\n    return this.combinations;\n  }\n\n  public hasCommonPupil(other: Course): boolean {\n    return this.members.some((p) => other.members.includes(p));\n  }\n\n  /*\n   *  output support\n   */\n  public asLO() {\n    var lo: any = {\n      no: this.no,\n      name: this.name,\n      block: this.block?.getIndex(),\n      members: this.members.length,\n      combis: this.combinations.length,\n    };\n    return lo;\n  }\n}\n","import { Course } from './Course';\n\nexport class CourseBlock {\n  readonly no: number;\n  private courseList: Course[];\n  constructor(theNo: number, courseList: Course[]) {\n    this.no = theNo;\n    this.courseList = courseList;\n    const self = this;\n    courseList.forEach((c) => c.setBlock(self));\n  }\n  public getIndex() {\n    return this.no;\n  }\n}\n","import { Course } from './Course';\nimport { Pupil } from './Pupil';\n\nexport class CourseCombination {\n  readonly no: number;\n  readonly name: string;\n  private courseList: Course[];\n  private members: Pupil[];\n  private combiSize: number;\n\n  // holds all course combinations sharing at least one course\n  private connectedCombis?: CourseCombination[];\n\n  constructor(theNo: number, name: string, courses: Course[]) {\n    this.no = theNo;\n    this.name = name;\n    this.courseList = courses;\n    this.members = [];\n    this.combiSize = 0;\n    var self = this;\n    this.courseList.forEach((course) => course?.addCombination(self));\n  }\n\n  /**\n   * initializes connected combis.\n   * may only be called once after all combis are created!\n   */\n  public initConnectedCombis() {\n    var otherCombis = new Set<CourseCombination>();\n    var allMembers = new Set<Pupil>();\n    this.courseList.forEach((course) => {\n      if (course != null) {\n        course.getCombinations().forEach((combi) => otherCombis.add(combi));\n        course.getMembers().forEach((pupil) => allMembers.add(pupil));\n      }\n    });\n    otherCombis.delete(this);\n    this.connectedCombis = Array.from(otherCombis);\n    this.combiSize = allMembers.size;\n  }\n\n  public getIndex() {\n    return this.no;\n  }\n\n  public addMember(member: Pupil) {\n    this.members.push(member);\n  }\n\n  public getCourses(): Course[] {\n    return this.courseList;\n  }\n\n  public getConnectedCombis(): CourseCombination[] {\n    return this.connectedCombis!;\n  }\n\n  public getMember(i: number) {\n    return this.members[i];\n  }\n\n  public getMembers() {\n    return this.members;\n  }\n\n  public getMemberCount(): number {\n    return this.members.length;\n  }\n\n  public getCombiSize(): number {\n    return this.combiSize;\n  }\n\n  public getContacts(): number {\n    return this.members.length * (this.combiSize - 1);\n  }\n\n  /*\n   *  output support\n   */\n  public asLO() {\n    var lo: any = {\n      no: this.no,\n      count: this.members.length,\n      combiSize: this.combiSize,\n      contacts: this.getContacts(),\n      crossCombis: this.connectedCombis?.length,\n    };\n    this.courseList.forEach((course, i) => {\n      lo['Block-' + i] = course == null ? '--' : course.getName();\n    });\n    return lo;\n  }\n}\n","import { CourseCombination } from './CourseCombination';\n\nexport class Pupil {\n  readonly no: number;\n  readonly firstname: string;\n  readonly lastname: string;\n  private courseCombination!: CourseCombination;\n\n  constructor(theNo: number, lastname: string, firstname: string) {\n    this.no = theNo;\n    this.firstname = firstname;\n    this.lastname = lastname;\n  }\n\n  public setCourseCombination(combi: CourseCombination) {\n    this.courseCombination = combi;\n  }\n\n  public getCourseCombination() {\n    return this.courseCombination;\n  }\n\n  public getIndex() {\n    return this.no;\n  }\n\n  /*\n   *  output support\n   */\n  public asLO() {\n    var lo: any = {\n      no: this.no,\n      lastname: this.lastname,\n      firstname: this.firstname,\n      combi: this.courseCombination.getIndex(),\n      group: '--',\n    };\n    this.courseCombination.getCourses().forEach((course, i) => {\n      lo['block-' + i] = course == null ? '--' : course.getName();\n    });\n    return lo;\n  }\n}\n","import { Course } from './Course';\nimport { CourseBlock } from './CourseBlock';\nimport { CourseCombination } from './CourseCombination';\nimport { Pupil } from './Pupil';\nimport ResultProvider from './ResultProvider';\n\nexport class GradeLevel implements ResultProvider {\n  private pupilList: Pupil[];\n  private courseList: Course[];\n  private combinationList: CourseCombination[];\n  private blockList: CourseBlock[];\n\n  constructor(data: string[][]) {\n    this.pupilList = [];\n    this.courseList = [];\n    this.combinationList = [];\n    this.blockList = [];\n\n    this.initFromData(data);\n  }\n\n  private initFromData(data: string[][]) {\n    var pupilCourses: Course[][];\n    var currentCourses: Course[];\n    var courseMap: Map<string, Course>;\n    courseMap = new Map();\n    pupilCourses = [];\n    data.slice(1).forEach((fields) => {\n      if (fields.length > 2) {\n        const pupil = new Pupil(this.pupilList.length, fields[0], fields[1]);\n        this.pupilList.push(pupil);\n        currentCourses = [];\n        pupilCourses.push(currentCourses);\n        fields.slice(2).forEach((courseName) => {\n          if (courseName.length > 0) {\n            const course = this.getCourse(courseMap, courseName);\n            course.addMember(pupil);\n            currentCourses.push(course);\n          }\n        });\n      }\n    });\n    this.initBlocks();\n    this.sortCoursesByBlock(pupilCourses);\n    this.initCourseCombinations(pupilCourses);\n  }\n\n  private sortCoursesByBlock(pupilCourses: Course[][]) {\n    for (let i = 0; i < pupilCourses.length; i++) {\n      const courseList = pupilCourses[i];\n      var orderedList: Course[] = new Array(this.blockList.length).fill(null);\n      for (let j = 0; j < courseList.length; j++) {\n        const course = courseList[j];\n        orderedList[course.getBlock().getIndex()] = course;\n      }\n      pupilCourses[i] = orderedList;\n    }\n  }\n\n  private initCourseCombinations(pupilCourses: Course[][]) {\n    var combiMap = new Map<string, CourseCombination>();\n    var combiName: string;\n    var combi: CourseCombination;\n    for (let i = 0; i < pupilCourses.length; i++) {\n      const courses = pupilCourses[i];\n      combiName = this.nameForCourseList(courses);\n      if (combiMap.has(combiName)) {\n        combi = combiMap.get(combiName)!;\n      } else {\n        combi = new CourseCombination(\n          this.combinationList.length,\n          combiName,\n          courses\n        );\n        combiMap.set(combiName, combi);\n        this.combinationList.push(combi);\n      }\n      this.pupilList[i].setCourseCombination(combi);\n      combi.addMember(this.pupilList[i]);\n    }\n    this.combinationList.forEach((combi) => combi.initConnectedCombis());\n  }\n\n  private nameForCourseList(courses: Course[]): string {\n    return courses.reduce(\n      (res, entry) =>\n        res.concat(entry == null ? '--' : entry.getName()).concat(';'),\n      ''\n    );\n  }\n\n  /**\n   * calculate blocks of courses running at the same time\n   * within one block a pupil can only be member of one course.\n   */\n  private initBlocks() {\n    var indices: number[];\n    var seenPupil: Pupil[];\n    var blockCourses: Course[];\n    var blockNo: number = 0;\n    const courses = Array.from(this.courseList);\n    courses.sort((a, b) => b.getMemberCount() - a.getMemberCount());\n\n    while (courses.length !== 0) {\n      indices = [0];\n      blockCourses = [courses[0]];\n      seenPupil = courses[0].getMembers();\n      for (let i = 1; i < courses.length; i++) {\n        const next = courses[i];\n        // eslint-disable-next-line\n        if (!next.getMembers().some((p) => seenPupil.includes(p))) {\n          blockCourses.push(next);\n          indices.push(i);\n          seenPupil = seenPupil.concat(next.getMembers());\n          if (seenPupil.length === this.pupilList.length) break;\n        }\n      }\n      // remove used courses\n      for (let i = indices.length - 1; i >= 0; i--) {\n        courses.splice(indices[i], 1);\n      }\n      // build block\n      this.blockList.push(new CourseBlock(blockNo, blockCourses));\n      blockNo++;\n    }\n  }\n\n  public getMembers() {\n    return this.pupilList;\n  }\n\n  public getCourses() {\n    return this.courseList;\n  }\n\n  public getBlocks(): CourseBlock[] {\n    return this.blockList;\n  }\n\n  public getCombinations(): CourseCombination[] {\n    return this.combinationList;\n  }\n\n  private getCourse(courseMap: Map<string, Course>, name: string): Course {\n    if (courseMap.has(name)) {\n      return courseMap.get(name)!;\n    } else {\n      const course = new Course(this.courseList.length, name);\n      this.courseList.push(course);\n      courseMap.set(name, course);\n      return course;\n    }\n  }\n\n  public getContacts(): number {\n    return this.combinationList.reduce(\n      (sum, combi) => sum + combi.getContacts(),\n      0\n    );\n  }\n  /*\n   *  output support\n   */\n  public getLevel() {\n    return this;\n  }\n\n  public displayString() {\n    return `Pupils: ${this.pupilList.length}; Courses: ${\n      this.courseList.length\n    }; Blocks: ${this.blockList.length}; Combinations: ${\n      this.combinationList.length\n    }; Contacts: ${this.getContacts()}`;\n  }\n\n  public print() {\n    console.log('PUPILS');\n    console.table(this.pupilTable());\n    console.log('COURSE COMBINATIONS');\n    console.table(this.combiTable());\n    console.log('COURSES');\n    console.table(this.courseTable());\n    console.log('CONTACTS : ' + this.getContacts());\n  }\n\n  public pupilTable() {\n    return this.pupilList.map((each) => each.asLO());\n  }\n\n  public courseTable() {\n    return this.courseList.map((each) => each.asLO());\n  }\n\n  public combiTable() {\n    return this.combinationList.map((each) => each.asLO());\n  }\n}\n","import { LevelSlicer } from \"./LevelSlicer\";\n\nexport class Move {\n  public readonly combination: number;\n  public readonly from: number;\n  public readonly to: number;\n  public readonly progress: number;\n\n  constructor(combination: number, from: number, to: number, progress: number) {\n    this.combination = combination;\n    this.from = from;\n    this.to = to;\n    this.progress = progress;\n  }\n\n  // revert this move\n  public revert(slicer: LevelSlicer) {\n    slicer.revertMove(this);\n  }\n\n}\n","import { CourseCombination } from '../CourseCombination';\nimport { LevelSlicer } from './LevelSlicer';\nimport { Move } from './Move';\n\nexport class CombiDistribution {\n  readonly no: number;\n  readonly size: number;\n  readonly slicer: LevelSlicer;\n  readonly combi: CourseCombination;\n  readonly courseIndices: number[];\n  readonly memberCounts: number[];\n  readonly combiSizes: number[];\n  readonly connectedDistris: CombiDistribution[];\n\n  constructor(aCombi: CourseCombination, aSlicer: LevelSlicer) {\n    this.combi = aCombi;\n    this.slicer = aSlicer;\n    this.no = this.combi.getIndex();\n    this.size = aSlicer.getSize();\n    this.memberCounts = new Array(this.size).fill(0);\n    this.combiSizes = new Array(this.size).fill(0);\n    this.courseIndices = [];\n    this.combi.getCourses().forEach((course) => {\n      if (course != null) {\n        this.courseIndices.push(course.getIndex());\n      }\n    });\n    // wll be filled after complete creation of distris\n    this.connectedDistris = [];\n  }\n\n  /**\n   * called only once after creation of all instances.\n   *\n   * @param allDistris all created instances in slicer.\n   */\n  public fillConnected(allDistris: CombiDistribution[]) {\n    this.combi.getConnectedCombis().forEach((connected) => {\n      this.connectedDistris.push(allDistris[connected.getIndex()]);\n    });\n  }\n\n  public getIndex() {\n    return this.no;\n  }\n\n  public getContacts(slice?: number): number {\n    if (slice === undefined) {\n      return this.memberCounts.reduce(\n        (sum, _, i) => sum + this.getContacts(i),\n        0\n      );\n    } else {\n      return this.memberCounts[slice] * (this.combiSizes[slice] - 1);\n    }\n  }\n\n  public getMemberCounts() {\n    return this.memberCounts;\n  }\n\n  public getMemberCount(slice?: number): number {\n    if (slice === undefined) {\n      return this.memberCounts.reduce(\n        (sum, _, i) => sum + this.getMemberCount(i),\n        0\n      );\n    } else {\n      return this.memberCounts[slice];\n    }\n  }\n\n  public getCombination() {\n    return this.combi;\n  }\n\n  /**\n   * optimization workhorse.\n   * find moves for optimization of groupp size\n   *\n   */\n  public findGroupSizeMoves(resultList: Move[], weighter: (size:number, max: number) => number) {\n    var courseSizes: number[][];\n    var maxSizes: number[];\n    var sourceAdvantages: number[];\n    var targetPenaltys: number[];\n\n    courseSizes = this.slicer.getCourseSizes();\n    maxSizes = this.slicer.getMaxSizes();\n\n    // calculate expected weighted changes of group size\n    sourceAdvantages = this.memberCounts.map((members, slice) => {\n      return members === 0 ? 0 \n        : this.courseIndices.reduce((sum , courseIdx) => sum + weighter(courseSizes[courseIdx][slice] , maxSizes[courseIdx]) , 0 );\n    });\n    targetPenaltys = this.memberCounts.map((members, slice) => {\n      return this.courseIndices.reduce((sum , courseIdx) => sum + weighter(courseSizes[courseIdx][slice] + 1, maxSizes[courseIdx]) , 0 );\n    });\n\n    sourceAdvantages.forEach((adv, from) => {\n      if (adv > 0) {\n        targetPenaltys.forEach((pen, to) => {\n          var progress = adv - pen;\n          if (progress > 0) {\n            resultList.push(new Move(this.getIndex(), from, to, progress))\n          }\n        })\n      }\n    })\n  }\n\n  /**\n   * optimization workhorse.\n   * find moves for contact optimization.\n   *\n   */\n  public findContactMoves(resultList: Move[]) {\n    var courseSizes: number[][];\n    var maxSizes: number[];\n    var sources: number[];\n    var targets: number[];\n    var sourceAdvantages: number[];\n    var targetPenaltys: number[];\n\n    courseSizes = this.slicer.getCourseSizes();\n    maxSizes = this.slicer.getMaxSizes();\n    // find allowed source group indices\n    sources = this.memberCounts\n      .map((_, i) => i)\n      .filter((i) => this.memberCounts[i] > 0);\n\n    // find allowed targets group indices with size of all courses less than maxSize\n    targets = this.memberCounts\n      .map((_, i) => i)\n      .filter((slice) => {\n        return this.courseIndices.every(\n          (courseIdx) => courseSizes[courseIdx][slice] < maxSizes[courseIdx]\n        );\n      });\n\n    // fast exit if no move possible\n    if (\n      sources.length === 0 ||\n      targets.length === 0 ||\n      (sources.length === 1 &&\n        targets.length === 1 &&\n        sources[0] === targets[0])\n    ) {\n      return;\n    }\n\n    // calculate expected changes of contacts\n    sourceAdvantages = sources.map((i) => this.advantageOnRemoveFrom(i));\n    targetPenaltys = targets.map((i) => this.penaltyOnAddTo(i));\n\n    // find valid moves\n    sources.forEach((from, fromIdx) => {\n      targets.forEach((to, toIdx) => {\n        if (\n          from !== to &&\n          sourceAdvantages[fromIdx] - targetPenaltys[toIdx] > 0\n        ) {\n          resultList.push(\n            new Move(\n              this.getIndex(),\n              from,\n              to,\n              sourceAdvantages[fromIdx] - targetPenaltys[toIdx]\n            )\n          );\n        }\n      });\n    });\n  }\n\n  /**\n   * calculate the shrink in contacts if removing one pupil from slice\n   * @param slice index of slice to remove pupil from\n   */\n  private advantageOnRemoveFrom(slice: number): number {\n    // change in own combi caused by members and size change\n    var res = this.memberCounts[slice] + this.combiSizes[slice] - 2;\n    // in connected combis only the size changes by one\n    return this.connectedDistris.reduce(\n      (sum, other) => sum + other.memberCounts[slice],\n      res\n    );\n  }\n\n  /**\n   * calculate the growth in contacts if adding one pupil to slice\n   * @param slice index of slice to remove pupil from\n   */\n  private penaltyOnAddTo(slice: number): number {\n    // change in own combi caused by members and size change\n    var res = this.memberCounts[slice] + this.combiSizes[slice];\n    // in connected combis only the size changes by one\n    return this.connectedDistris.reduce(\n      (sum, other) => sum + other.memberCounts[slice],\n      res\n    );\n  }\n\n  public doMove(move: Move) {\n    this.removeMemberFromSlice(1, move.from);\n    this.addMemberToSlice(1, move.to);\n  }\n\n  public addMemberToSlice(count: number, slice: number) {\n    this.memberCounts[slice] += count;\n    this.combiSizes[slice] += count;\n    this.connectedDistris.forEach((dist) => (dist.combiSizes[slice] += count));\n    var cs = this.slicer.getCourseSizes();\n    this.courseIndices.forEach((i) => (cs[i][slice] += count));\n  }\n\n  public removeMemberFromSlice(count: number, slice: number) {\n    this.memberCounts[slice] -= count;\n    this.combiSizes[slice] -= count;\n    this.connectedDistris.forEach((dist) => (dist.combiSizes[slice] -= count));\n    var cs = this.slicer.getCourseSizes();\n    this.courseIndices.forEach((i) => (cs[i][slice] -= count));\n  }\n\n  /*\n   *  output support\n   */\n  public asLO() {\n    var lo: any = this.combi.asLO();\n    for (let i = 0; i < this.size; i++) {\n      lo['Count-' + i] = this.memberCounts[i];\n      lo['CombiSize-' + i] = this.combiSizes[i];\n      lo['Contacts-' + i] = this.getContacts(i);\n    }\n    return lo;\n  }\n\n  public setPupilsGroups(pupilsTable: any[]) {\n    var pos = 0;\n    this.memberCounts.forEach((count, i) => {\n      var max = pos + count;\n      while (pos < max) {\n        pupilsTable[this.combi.getMember(pos).getIndex()].group = i;\n        pos++;\n      }\n    });\n  }\n}\n","import { LevelSlicer } from \"./LevelSlicer\";\nimport { Move } from \"./Move\";\n\nexport class ModeSwitchMove extends Move {\n\n  constructor() {\n    super(-1, -1 , -1 , 0);\n  }\n\n  // revert this move\n  public revert(slicer: LevelSlicer) {\n    slicer.revertModeSwitch();\n  }\n\n}","import { LevelSlicer } from \"./LevelSlicer\";\nimport { Move } from \"./Move\";\n\nexport class FinishMove extends Move {\n\n  constructor() {\n    super(-1, -1 , -1 , 0);\n  }\n\n  // revert this move\n  public revert(slicer: LevelSlicer) {\n    slicer.revertFinish();\n  }\n\n}","import { GradeLevel } from '../GradeLevel';\nimport { CombiDistribution } from './CombiDistribution';\nimport { Move } from './Move';\nimport ResultProvider from '../ResultProvider';\nimport { ModeSwitchMove } from './ModeSwitchMove';\nimport { FinishMove } from './FinishMove';\n\nexport class LevelSlicer implements ResultProvider {\n  readonly size: number;\n  readonly level: GradeLevel;\n  readonly distributions: CombiDistribution[];\n  readonly courseSizes: number[][];\n  readonly maxSizes: number[];\n  private cfgString: string;\n  readonly moveRandom: boolean;\n  private reduceGroups: boolean = false;\n  private finished: boolean = false;\n  private moveList: Move[];\n  private moveTolerance: number;\n  private moveSlowly: boolean;\n\n  public static solve(\n    aSize: number,\n    aLevel: GradeLevel,\n    initializer: string,\n    move: string,\n    speed: string,\n    moveTolerance: number,\n    groupRestrict: string,\n    groupTolerance: number,\n    iterations: number\n  ): LevelSlicer {\n    var best: LevelSlicer;\n    var contacts: number;\n    var count: number = 0;\n\n    best = new LevelSlicer(\n      aSize,\n      aLevel,\n      initializer,\n      move,\n      speed,\n      moveTolerance,\n      groupRestrict,\n      groupTolerance\n    );\n    best.optimize();\n    contacts = best.getContacts();\n    do {\n      var current: LevelSlicer;\n      var currentContacts: number;\n\n      count++;\n      current = new LevelSlicer(\n        aSize,\n        aLevel,\n        initializer,\n        move,\n        speed,\n        moveTolerance,\n        groupRestrict,\n        groupTolerance\n      );\n      current.optimize();\n      currentContacts = current.getContacts();\n      if (currentContacts < contacts) {\n        best = current;\n        contacts = currentContacts;\n      }\n    } while (count < iterations);\n    return best;\n  }\n\n  constructor(\n    aSize: number,\n    aLevel: GradeLevel,\n    initializer: string,\n    move: string,\n    speed: string,\n    moveTolerance: number,\n    groupRestrict: string,\n    groupTolerance: number\n  ) {\n    if (aSize < 2) {\n      throw new Error('size must be at least 2');\n    }\n    // init fields\n    this.size = aSize;\n    this.level = aLevel;\n    this.courseSizes = new Array(this.level.getCourses().length);\n    for (let i = 0; i < this.courseSizes.length; i++) {\n      this.courseSizes[i] = new Array(this.size).fill(0);\n    }\n    this.distributions = [];\n    this.distributions = this.level\n      .getCombinations()\n      .map((combi) => new CombiDistribution(combi, this));\n    this.distributions.forEach((dist) =>\n      dist.fillConnected(this.distributions)\n    );\n    // init groups\n    this.cfgString = 'Groups: ' + this.size + '; ';\n    this.cfgString += 'Initial Groups: ' + initializer + '; ';\n    if (initializer === 'random') {\n      this.initRandomlyDistributed();\n    } else {\n      this.initAllIntoFirstSlice();\n    }\n    // init max sizes\n    this.reduceGroups = true;\n    this.cfgString = this.cfgString + 'Group size: ';\n    this.maxSizes = new Array(this.courseSizes.length);\n    if (groupRestrict === 'max') {\n      var max = this.level\n        .getCourses()\n        .reduce((res, course) => Math.max(res, course.getMemberCount()), 0);\n      max = Math.ceil(max / this.size) + groupTolerance;\n      this.maxSizes.fill(max);\n      this.cfgString += 'max ' + max + '; ';\n    } else if (groupRestrict === 'each') {\n      this.level.getCourses().forEach((course) => {\n        this.maxSizes[course.getIndex()] =\n          Math.ceil(course.getMemberCount() / this.size) + groupTolerance;\n      });\n      this.cfgString += 'by course with tolerance ' + groupTolerance + '; ';\n    } else {\n      this.reduceGroups = false;\n      this.maxSizes.fill(this.level.getMembers().length);\n      this.cfgString += 'unrestricted; ';\n    }\n    // init move policy\n    this.moveList = [];\n    this.moveSlowly = 'slow' === speed;\n    this.cfgString += this.moveSlowly\n      ? 'Move speed: slow; '\n      : 'Move speed: fast; ';\n    this.moveRandom = 'random' === move;\n    this.cfgString += this.moveRandom\n      ? 'Move: select random; '\n      : 'Move: use first best; ';\n    this.moveTolerance = moveTolerance / 100;\n    this.cfgString += 'Move tolerance: ' + moveTolerance + '; ';\n  }\n\n  private initAllIntoFirstSlice() {\n    this.distributions.forEach((dist) => {\n      dist.addMemberToSlice(dist.getCombination().getMemberCount(), 0);\n    });\n  }\n\n  private initRandomlyDistributed() {\n    var indices = this.level\n      .getMembers()\n      .map((pupil) => pupil.getCourseCombination().getIndex());\n    var slice = 0;\n    while (indices.length > 0) {\n      var pos = Math.floor(Math.random() * indices.length);\n      this.distributions[indices[pos]].addMemberToSlice(1, slice);\n      indices.splice(pos, 1);\n      slice = (slice + 1) % this.size;\n    }\n  }\n\n  public optimize() {\n    while (!this.finished) {\n      this.doMove();\n    }\n  }\n\n  /**\n   * optimization workhouse\n   */\n  public doMove() {\n    var candidateMoves: Move[];\n\n    // calculate candidates\n    candidateMoves = [];\n    if (this.reduceGroups) {\n      this.distributions.forEach((dist) => {\n        dist.findGroupSizeMoves(candidateMoves, (size, max) => ((size > max) ? max : 0))\n      });\n      if (candidateMoves.length === 0) {\n        this.reduceGroups = false;\n        this.moveList.push(new ModeSwitchMove());\n        return;\n      }\n    } else {\n      this.distributions.forEach((dist) => {\n        dist.findContactMoves(candidateMoves);\n      });\n      if (candidateMoves.length === 0) {\n        this.finished = true;\n        this.moveList.push(new FinishMove());\n        return;\n      }\n    }\n\n    // sort candidates\n    candidateMoves.sort((a, b) => b.progress - a.progress);\n    // select candidate\n    var move;\n    if (this.reduceGroups) {\n      // always use best move\n      move = candidateMoves[0];\n    } else {\n      var idx: number; \n      if (this.moveRandom) {\n        idx = Math.floor(\n          Math.random() * candidateMoves.length * this.moveTolerance\n        );\n      } else {\n        idx = 0;\n      }\n      // take first or last move\n      if (this.moveSlowly) {\n        move = candidateMoves[candidateMoves.length - 1 - idx];\n      } else {\n        move = candidateMoves[idx];\n      }\n    }\n    \n    // execute move\n    this.distributions[move.combination].doMove(move);\n    this.moveList.push(move);\n    // console.log(\"MOVED: \" +JSON.stringify(move));\n  }\n\n  public undoLastMove() {\n    if (this.moveList.length > 0) {\n      const move = this.moveList.pop();\n      move!.revert(this);\n    }\n  }\n\n  public revertMove(move: Move) {\n    var revMove = new Move(move.combination, move.to, move.from, - move.progress);\n    this.distributions[revMove.combination].doMove(revMove);\n  }\n\n  public revertFinish() {\n    this.finished = false;\n  }\n\n  public revertModeSwitch() {\n    this.reduceGroups = true;\n  }\n\n  public getSize() {\n    return this.size;\n  }\n\n  public getCourseSizes() {\n    return this.courseSizes;\n  }\n\n  public getMaxSizes() {\n    return this.maxSizes;\n  }\n\n  public getOversize() {\n    return this.courseSizes.reduce((sum, groupSizes, i) => {\n      return groupSizes.reduce(\n        (res, siz) => res + Math.max(0, siz - this.maxSizes[i]),\n        sum\n      );\n    }, 0);\n  }\n\n  public getContacts(slice?: number): number {\n    return this.distributions.reduce(\n      (sum, dist) => sum + dist.getContacts(slice),\n      0\n    );\n  }\n\n  public getMemberCount(slice?: number): number {\n    return this.distributions.reduce(\n      (sum, dist) => sum + dist.getMemberCount(slice),\n      0\n    );\n  }\n\n  /*\n   *  output support\n   */\n  public configString() {\n    return this.cfgString;\n  }\n\n  public getLevel() {\n    return this.level;\n  }\n\n  public statusString() {\n    return `Groups: ${this.size}; Contacts: ${this.getContacts()}; Moves: ${\n      this.moveList.length\n    }; Finished: ${this.finished}; Fixing sizes: ${\n      this.reduceGroups\n    }; Oversize: ${this.getOversize()}`;\n  }\n\n  public print() {\n    console.log('PUPILS');\n    console.table(this.pupilTable());\n    console.log('DISTRIBUTIONS');\n    console.table(this.combiTable());\n    console.log('COURSES');\n    console.table(this.courseTable());\n    console.log('CONTACTS : ' + this.getContacts());\n  }\n\n  public courseTable() {\n    var res: Object[] = [];\n    this.level.getCourses().forEach((course) => {\n      var lo = course.asLO();\n      for (let i = 0; i < this.size; i++) {\n        lo['Group-' + i] = this.courseSizes[course.getIndex()][i];\n      }\n      res.push(lo);\n    });\n    return res;\n  }\n\n  public combiTable() {\n    var res: Object[] = [];\n    this.distributions.forEach((dist) => res.push(dist.asLO()));\n    var sum: any = { no: 'Summe' };\n    for (let i = 0; i < this.size; i++) {\n      sum['Count-' + i] = this.getMemberCount(i);\n      sum['CombiSize-' + i] = '--';\n      sum['Contacts-' + i] = this.getContacts(i);\n    }\n    res.push(sum);\n    return res;\n  }\n\n  public pupilTable() {\n    var table: any[] = this.level.pupilTable();\n    this.distributions.forEach((dist) => dist.setPupilsGroups(table));\n    return table;\n  }\n}\n","import React from 'react';\n\nconst ResultTable: React.FC<{\n  list?: any[];\n  title: String;\n  selections: number[];\n  setSelection: any;\n}> = ({ list, title, selections, setSelection }) => {\n  const selectedRows = selections;\n  const updateSelectedRow = setSelection;\n\n  if (!list || list.length === 0) {\n    return null;\n  }\n  var keys = Object.keys(list[0]);\n  var csv = '';\n  csv = keys.reduce((res, k) => res + k + ';', csv) + '\\r\\n';\n  csv = list.reduce((resO, obj) => {\n    return keys.reduce((res, k) => res + obj[k] + ';', resO) + '\\r\\n';\n  }, csv);\n  String.toString();\n  var dataURL = 'data:text/csv;charset=UTF-8,' + encodeURIComponent(csv);\n  return (\n    <div>\n      <div>\n        <h5 style={{ display: 'inline' }}>{title}</h5>\n        <a\n          className=\"btn btn-primary float-right\"\n          href={dataURL}\n          download=\"result.csv\"\n        >\n          CSV herunterladen\n        </a>\n      </div>\n      <table className=\"table table-bordered table-sm\">\n        <thead className=\"thead-light\">\n          <tr>\n            {keys.map((k) => (\n              <th>{k}</th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          {list.map((obj, i) => {\n            return (\n              <tr\n                className={selectedRows?.includes(i) ? 'table-info' : ''}\n                onClick={(ev) => updateSelectedRow(i)}\n              >\n                {keys.map((k) => (\n                  <td>{obj[k]}</td>\n                ))}\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nexport default ResultTable;\n","import { useState } from 'react';\nimport ResultProvider from '../domain/ResultProvider';\nimport ResultTable from './ResultTable';\n\nconst Result: React.FC<{ holder: ResultProvider[] }> = ({ holder }) => {\n  const [selPupils, setSelPupils] = useState<number[]>([]);\n  const [selCourses, setSelCourses] = useState<number[]>([]);\n  const [selCombis, setSelCombis] = useState<number[]>([]);\n\n  if (holder.length === 0) {\n    return null;\n  }\n  var provider = holder[0];\n\n  const updatePupilSelection = (row: number) => {\n    setSelPupils([row]);\n    var combi = provider.getLevel().getMembers()[row].getCourseCombination();\n    setSelCombis([combi.getIndex()]);\n    setSelCourses(\n      combi\n        .getCourses()\n        .filter((c) => c != null)\n        .map((c) => c.getIndex())\n    );\n  };\n\n  function updateCourseSelection(row: number) {\n    setSelCourses([row]);\n    var course = provider.getLevel().getCourses()[row];\n    setSelCombis(course.getCombinations().map((c) => c.getIndex()));\n    setSelPupils(course.getMembers().map((p) => p.getIndex()));\n  }\n\n  function updateCombiSelection(row: number) {\n    setSelCombis([row]);\n    var allCombis = provider.getLevel().getCombinations();\n    if (row >= allCombis.length) {\n      setSelPupils([]);\n      setSelCourses([]);\n    } else {\n      var combi = allCombis[row];\n      setSelPupils(combi.getMembers().map((p) => p.getIndex()));\n      setSelCourses(\n        combi\n          .getCourses()\n          .filter((c) => c != null)\n          .map((c) => c.getIndex())\n      );\n    }\n  }\n\n  return (\n    <>\n      <ResultTable\n        list={provider.pupilTable()}\n        title=\"Schler\"\n        selections={selPupils}\n        setSelection={updatePupilSelection}\n      ></ResultTable>\n      <ResultTable\n        list={provider.courseTable()}\n        title=\"Kurse\"\n        selections={selCourses}\n        setSelection={updateCourseSelection}\n      ></ResultTable>\n      <ResultTable\n        list={provider.combiTable()}\n        title=\"Kursbelegung\"\n        selections={selCombis}\n        setSelection={updateCombiSelection}\n      ></ResultTable>\n    </>\n  );\n};\n\nexport default Result;\n","import React, { useState } from 'react';\nimport CSVReader from 'react-csv-reader';\nimport { GradeLevel } from '../domain/GradeLevel';\nimport { LevelSlicer } from '../domain/solve/LevelSlicer';\nimport ResultProvider from '../domain/ResultProvider';\nimport Result from './Result';\n\ninterface Props {}\n\nconst Input: React.FC<Props> = () => {\n  const [gradeLevel, setGradeLevel] = useState<GradeLevel>();\n  const [levelSlicer, setLevelSlicer] = useState<LevelSlicer>();\n  const [slicerState, setSlicerState] = useState('');\n  const [sliceCount, setSliceCount] = useState(2);\n  const [initializer, setInitializer] = useState('first');\n  const [groupRestrict, setGroupRestrict] = useState('each');\n  const [groupTolerance, setGroupTolerance] = useState(1);\n  const [move, setMove] = useState('random');\n  const [speed, setSpeed] = useState('slow');\n  const [relMoves, setRelMoves] = useState(30);\n  const [iterations, setIterations] = useState(200);\n  const [result, setResult] = useState<ResultProvider[]>([]);\n\n  function updateResult(provider: ResultProvider) {\n    if (provider) {\n      setResult([provider]);\n    } else {\n      setResult([]);\n    }\n  }\n\n  return (\n    <main className=\"container-fluid\">\n      <h3>Eingabe</h3>\n      <div className=\"mb-3\">\n        <label htmlFor=\"csvUpload\" className=\"form-label\">\n          CSV Datei mit Daten auswhlen:\n        </label>\n        <CSVReader\n          inputId=\"csvUpload\"\n          cssInputClass=\"form-control\"\n          parserOptions={{}}\n          onFileLoaded={(data) => {\n            const level = new GradeLevel(data);\n            setGradeLevel(level);\n            setLevelSlicer(undefined);\n            setSlicerState('');\n            updateResult(level);\n          }}\n        />\n        <p>{gradeLevel ? gradeLevel.displayString() : 'Bitte Daten laden.'}</p>\n      </div>\n\n      <h3>Berechnen</h3>\n      <details>\n        <summary>\n          <h5 style={{ display: 'inline' }}>Konfiguration</h5>\n        </summary>\n        <form>\n          <div className=\"form-row\">\n            <div className=\"form-group col-md-4\">\n              <label htmlFor=\"sliceInput\" className=\"form-label\">\n                Gruppen Anzahl: <b>{sliceCount}</b>\n              </label>\n              <input\n                className=\"form-control-range\"\n                type=\"range\"\n                step=\"1\"\n                id=\"sliceInput\"\n                min=\"2\"\n                max=\"10\"\n                onChange={(e) => setSliceCount(e.target.valueAsNumber)}\n                value={sliceCount}\n              />\n            </div>\n            <div className=\"form-group col-md-4\">\n              <label htmlFor=\"resrictSelect\" className=\"form-label\">\n                Begrenzung Gruppen Gre:\n              </label>\n              <select\n                id=\"resrictSelect\"\n                className=\"form-control\"\n                onChange={(e) => setGroupRestrict(e.target.value)}\n                value={groupRestrict}\n              >\n                <option value=\"none\">Keine Begrenzung</option>\n                <option value=\"max\">anhand grtem Kurs</option>\n                <option value=\"each\">je Kurs</option>\n              </select>\n            </div>\n            <div className=\"form-group col-md-4\">\n              <label htmlFor=\"toleranceInput\" className=\"form-label\">\n                Toleranz Gruppen Gre: <b>{groupTolerance}</b>\n              </label>\n              <input\n                type=\"range\"\n                id=\"toleranceInput\"\n                className=\"form-control\"\n                min=\"0\"\n                max=\"10\"\n                step=\"1\"\n                onChange={(e) => setGroupTolerance(e.target.valueAsNumber)}\n                value={groupTolerance}\n              />\n            </div>\n          </div>\n          <div className=\"form-row\">\n            <div className=\"form-group col-md-3\">\n              <label htmlFor=\"initializerSelect\" className=\"form-label\">\n                Initialisierung:\n              </label>\n              <select\n                id=\"initializerSelect\"\n                className=\"form-control\"\n                onChange={(e) => setInitializer(e.target.value)}\n                value={initializer}\n              >\n                <option value=\"first\">Alle in erster Gruppe</option>\n                <option value=\"random\">zufllig verteilt</option>\n              </select>\n            </div>\n            <div className=\"form-group col-md-3\">\n              <label htmlFor=\"speedSelect\" className=\"form-label\">\n                Optimierung:\n              </label>\n              <select\n                id=\"speedSelect\"\n                onChange={(e) => setSpeed(e.target.value)}\n                className=\"form-control\"\n                value={speed}\n              >\n                <option value=\"slow\">Langsam</option>\n                <option value=\"fast\">Schnell</option>\n              </select>\n            </div>\n            <div className=\"form-group col-md-3\">\n              <label htmlFor=\"moveSelect\" className=\"form-label\">\n                Schrittauswahl:\n              </label>\n              <select\n                id=\"moveSelect\"\n                className=\"form-control\"\n                onChange={(e) => setMove(e.target.value)}\n                value={move}\n              >\n                <option value=\"first\">Deterministisch</option>\n                <option value=\"random\">Zufllig</option>\n              </select>\n            </div>\n            <div className=\"form-group col-md-3\">\n              <label htmlFor=\"relmovesInput\" className=\"form-label\">\n                Schrittauswahl aus: <b>{relMoves} % </b>\n              </label>\n              <input\n                type=\"range\"\n                id=\"relmovesInput\"\n                className=\"form-control-range\"\n                step=\"10\"\n                min=\"0\"\n                max=\"100\"\n                onChange={(e) => setRelMoves(e.target.valueAsNumber)}\n                value={relMoves}\n              />\n            </div>\n            <div className=\"form-group col-md-2\">\n              <button\n                className=\"form-control btn btn-outline-secondary\"\n                disabled={!gradeLevel}\n                onClick={(e) => {\n                  e.preventDefault();\n                  if (gradeLevel) {\n                    var slicer = new LevelSlicer(\n                      sliceCount,\n                      gradeLevel,\n                      initializer,\n                      move,\n                      speed,\n                      relMoves,\n                      groupRestrict,\n                      groupTolerance\n                    );\n                    setLevelSlicer(slicer);\n                    setSlicerState(slicer.statusString());\n                    updateResult(slicer);\n                  }\n                }}\n              >\n                Neue Teilung Erzeugen\n              </button>\n            </div>\n            <div className=\"form-group col-md-2\">\n              <button\n                className=\"form-control btn btn-outline-secondary\"\n                disabled={!levelSlicer}\n                onClick={(e) => {\n                  e.preventDefault();\n                  if (levelSlicer) {\n                    levelSlicer.optimize();\n                    setSlicerState(levelSlicer.statusString());\n                    updateResult(levelSlicer);\n                  }\n                }}\n              >\n                Teilung Optimieren\n              </button>\n            </div>\n            <div className=\"form-group col-md-2\">\n              <button\n                className=\"form-control btn btn-outline-secondary\"\n                disabled={!levelSlicer}\n                onClick={(e) => {\n                  e.preventDefault();\n                  if (levelSlicer) {\n                    levelSlicer.doMove();\n                    setSlicerState(levelSlicer.statusString());\n                    updateResult(levelSlicer);\n                  }\n                }}\n              >\n                Einzelschritt ausfhren\n              </button>\n            </div>\n            <div className=\"form-group col-md-2\">\n              <button\n                className=\"form-control btn btn-outline-secondary\"\n                disabled = {!levelSlicer}\n                onClick={(e) => {\n                  e.preventDefault();\n                  if (levelSlicer) {\n                    levelSlicer.undoLastMove();\n                    setSlicerState(levelSlicer.statusString());\n                    updateResult(levelSlicer);\n                  }\n                }}\n              >\n                letzten Schritt zurck\n              </button>\n            </div>\n          </div>\n          <p>\n            {levelSlicer\n              ? levelSlicer.configString()\n              : 'Bitte Teilung erzeugen'}\n          </p>\n        </form>\n      </details>\n      <div>\n        <div className=\"form-group row container-fluid\">\n          <button\n            className=\"form-control col-sm-2 btn btn-primary\"\n            disabled={!gradeLevel}\n            onClick={(e) => {\n              e.preventDefault();\n              if (gradeLevel) {\n                var slicer = LevelSlicer.solve(\n                  sliceCount,\n                  gradeLevel,\n                  initializer,\n                  move,\n                  speed,\n                  relMoves,\n                  groupRestrict,\n                  groupTolerance,\n                  iterations\n                );\n                setLevelSlicer(slicer);\n                setSlicerState(slicer.statusString());\n                updateResult(slicer);\n              }\n            }}\n          >\n            Lsung berechnen\n          </button>\n          <label htmlFor=\"iterInput\" className=\"col-sm-2 col-form-label\">\n            Durchlufe:\n          </label>\n          <input\n            type=\"number\"\n            id=\"iterInput\"\n            className=\"col-sm-2 form-control\"\n            step=\"50\"\n            min=\"50\"\n            max=\"1000\"\n            onChange={(e) => setIterations(e.target.valueAsNumber)}\n            value={iterations}\n          />\n        </div>\n        <p>{slicerState ? slicerState : 'no Solution calculated'}</p>\n      </div>\n\n      <h3>Ausgabe</h3>\n      <Result holder={result} />\n    </main>\n  );\n};\nexport default Input;\n","import React from 'react';\n\ninterface Props {}\n\nconst HelpDialog: React.FC<Props> = () => (\n  <div>\n    <button\n      type=\"button\"\n      className=\"btn btn-primary\"\n      data-toggle=\"modal\"\n      data-target=\"#helpModalScrollable\"\n    >\n      Hilfe\n    </button>\n\n    <div\n      className=\"modal fade\"\n      id=\"helpModalScrollable\"\n      role=\"dialog\"\n      aria-labelledby=\"helpModalScrollableTitle\"\n      aria-hidden=\"true\"\n    >\n      <div\n        className=\"modal-dialog modal-dialog-scrollable modal-lg\"\n        role=\"document\"\n      >\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <h5 className=\"modal-title\" id=\"helpModalScrollableTitle\">\n              Hilfe\n            </h5>\n            <button\n              type=\"button\"\n              className=\"close\"\n              data-dismiss=\"modal\"\n              aria-label=\"Close\"\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n          </div>\n          <div className=\"modal-body\">\n            <h4>berblick</h4>\n            <p>\n              Dieses Werkzeug dient zur Aufteilung einer Klassenstufe in mehrere\n              Gruppen, die im Wechsel unterrichtet werden. Es bercksichtigt\n              insbesondere Klassenstufen, in denen der Unterricht nicht\n              durchgngig im Klassenverbund durchgefhrt wird. Es kann also je\n              Schler eine individuelle Kursbelegung geben.\n            </p>\n            <p>\n              Lsungen werden heuristisch berechnet. Somit wird nicht unbedingt\n              die optimale Lsung gefunden. Hauptbedingung fr eine gute Lsung\n              ist eine mglichst geringe Anzahl an paarweisen Kontakten von\n              Schlern. Ein Kontakt entseht dabei, wenn zwei Schler gemeinsam\n              in einem Kurs sind. Zustzlich knnen Beschrnkungen fr die\n              resultierende Kursgre bercksichtigt werden.\n            </p>\n            <h4>Eingabe Format</h4>\n            <p>\n              Als Eingabe wird eine CSV Datei erwartet. Die erste Zeile der\n              Datei wird ignoriert (Kopfzeile). Alle weiteren Zeilen entsprechen\n              einem Schler. Die ersten beiden Werte werden als Nachname und\n              Vorname des Schlers verstanden. Alle weiteren Werte werden als\n              Namen der vom Schler belegten Kurse interpretiert. Die Kursnamen\n              mssen eindeutig sein, auch in der Schreibweise. Leere Werte sind\n              zulssig und werden ignoriert.\n            </p>\n            <h4>Bedienung</h4>\n            <p>\n              Zunchst ist im Bereich <i>Eingabe</i> eine Datei im erwarteten\n              Format zu laden. Im Bereich <i>Berechnen</i> kann bei Bedarf die{' '}\n              <i>Konfiguartion</i> angepasst werden (Details s.u.) und dann die{' '}\n              <i>Lsung berechnet</i> werden. Bei der Berechnung wird der\n              Lsungsalgorithmus mehrmals durchlaufen und die beste gefundene\n              Lsung ausgegeben. Die Anzahl der <i>Durchlufe</i> kann\n              vorgegeben werden.\n            </p>\n            <h4>Ausgabe</h4>\n            <p>\n              Die Ausgabe der eingelesenen und berechneten Daten erfolgt im\n              unteren Bereich tabellarisch. Die Tabellen knnen als CSV-Dateien\n              gesichert werden. Es werden drei Tabellen angezeigt, die Schler,\n              die Kurse und die Kursbelegungen. Nach Erzeugung einer Lsung\n              werden in diesen Tabellen auch Informationen zu den Gruppen\n              dargestellt.\n            </p>\n            <p>\n              Zur genaueren Inspektion der Daten kann in jeder Tabelle eine\n              Zeile durch Mausklick selektiert werden. In den anderen beiden\n              Tabellen werden dann die korrespondierenden Zeilen hervorgehoben.\n            </p>\n            <h5>Die Schler Tabelle enthlt folgende Spalten:</h5>\n            <dl>\n              <dt>no</dt>\n              <dd>Nummer des Schlers</dd>\n              <dt>lastname</dt>\n              <dd>Nachname des Schlers</dd>\n              <dt>firstname</dt>\n              <dd>Vorname des Schlers</dd>\n              <dt>combi</dt>\n              <dd>\n                Eine numerische ID fr die Kombination von belegten Kursen des\n                Schlers. Genau die Schler mit der identischen Kursbelegung\n                haben hier die selbe ID.\n              </dd>\n              <dt>group</dt>\n              <dd>\n                ID der Gruppe, der der Schler bei der Teilung zugeordnet wurde.\n                Die IDs werden numerisch vergeben beginnend mit Null (0).\n              </dd>\n              <dt>block-n</dt>\n              <dd>\n                Name des Kurses den der Schler im n-ten Block belegt. Die\n                Aufteilung der Kurse auf Blcke werden automatisch berechnet und\n                mssen somit nicht den echten zeitlichen Blcken im Stundenplan\n                entsprechen.\n              </dd>\n            </dl>\n            <p>\n              <b>\n                <i>Hinweis:</i>\n              </b>{' '}\n              Schler in mit der selben Kursbelegung (combi) sind gleichwertig.\n              Sollten Schler aus einer Kursbelegung auf unterschiedliche\n              Gruppen verteilt worden sein, so ist fr das Ergebnis irrelevant\n              welcher konkrete Schler in welcher Gruppe ist. Es kann also\n              innerhalb einer Kursbelegung getauscht werden, so lange die Anzahl\n              der Schler je Gruppe nicht verndert wird.\n            </p>\n            <h4>Konfiguration</h4>\n            <p>\n              Optionen zur <i>Konfiguration</i> knnen auf Wunsch eingeblendet\n              werden. Die Konfigurationen teilen sich in zwei Bereiche.\n              Unterhalb der Einstellungen existieren Buttons zur\n              Einzeldurchfhrung der Optimierung und zur schrittweisen\n              Ausfhrung.\n            </p>\n            <h5>Grupen Einstellungen</h5>\n            <dl>\n              <dt>Anzahl Gruppen</dt>\n              <dd>\n                Legt fest in wieviele Gruppen der Jahrgang aufgeteilt werden\n                soll. Mglich sind 2 bis 5 Gruppen.\n              </dd>\n              <dt>Begrenzung Gruppen Gre.</dt>\n              <dd>\n                Definiert die maximale Gruppen Gre. Optionen sind:\n                <ul>\n                  <li>\n                    <b>Keine Begrenzung</b> - Die Gre der resultierenden Kurse\n                    ist unbegrenzt\n                  </li>\n                  <li>\n                    <b>anhand grtem Kurs</b> - Die Gre der resultierenden\n                    Kurse ist begrenzt durch die Gre des grten Kurses\n                    geteilt durch die Anzahl Gruppen.\n                  </li>\n                  <li>\n                    <b>je Kurs</b> - Die Gre der resultierenden Kurse ist\n                    begrenzt durch die Gre des jeweilgen Kurses geteilt durch\n                    die Anzahl Gruppen.\n                  </li>\n                </ul>\n              </dd>\n              <dt>Toleranz Gruppen Gre</dt>\n              <dd>\n                Bei einer Begrenzung der Gruppen Gre drfen die Gren der\n                resultierenden Kurse die Begrenzung um diese Anzahl an Schlern\n                bersteigen.\n              </dd>\n            </dl>\n            <h5>Parameter des Algorithmus</h5>\n            <dl>\n              <dt>Initialisierung</dt>\n              <dd>\n                Legt die initiale Verteilung der Schler auf Gruppen fest.\n                Entweder werden initial alle Schler der ersten Gruppe\n                zugeordnet oder die Verteilung erfolgt zufllig gleichverteilt\n                auf alle Gruppen.\n              </dd>\n              <dt>Optimierung</dt>\n              <dd>\n                Legt fest ob der Algorithmus sich bevorzugt langsam oder schnell\n                dem Ziel nhert. Abhngig von dieser Einstellung wird in jeder\n                Runde entweder der Schritt mit der kleinsten oder der grten\n                Verbesserung zur Ausfhrung gewhlt.\n              </dd>\n              <dt>Schrittauswahl</dt>\n              <dd>\n                Bei deterministischer Auswahl wird der erste gefunden Schritt\n                mit der kleinsten / grten Verbesserung ausgefhrt. Bei\n                zuflliger Auswahl wird aus den kleinsten / grten Schritten\n                zufllig ein Schritt zur Ausfhrung ausgewhlt.\n              </dd>\n              <dt>Schritt Auswahl aus X %</dt>\n              <dd>\n                Legt fest, wieviel Prozent aller mglichen Schritte bei der\n                zuflligen Auswahl bercksichtigt werden.\n              </dd>\n            </dl>\n            <h4>Algorithmus</h4>\n            <p>\n              Zur Initialisierung des Algorithmus wrden die Schler auf Gruppen\n              verteilt, entweder zufllig oder alle in die erste Gruppe. Der\n              Optimierungsalgorithmus arbeitet in zwei Phasen. In der ersten\n              Phase wird die Verteilung so angepasst, dass die angestrebten\n              Gren der Teilkurse eingehalten werden. In der zweiten Phase wird\n              die Verteilung so verndert, dass die Anzahl der Kontakte\n              mglichst gering wird.\n            </p>\n            <p>\n              Beide Phasen werden in Schritten durchgefhrt. Ein Schritt ist\n              dabei die Verschiebung eines Schlers von einer Gruppe in eine\n              andere Gruppe. Zur Festlegung eines Schrittes werden zunchst alle\n              mglichen Schritte ermittelt, die zur Verbesserung des aktuellen\n              Phasenziels beitragen. Gibt es keine solchen Schritte ist die\n              Phase abgeschlossen. Die gefundenen mglichen Schritte werden\n              gewichtet anhand der Verndeung an der Anzahl der Kontakte, die\n              der jeweilge Schritt bewirken wird. Aus den nach Gewicht\n              sortierten Schritten wird der auszufhrende Schritt gem dern\n              gewhlten Optioenn ausgewhlt und ausgefhrt.\n            </p>\n          </div>\n          <div className=\"modal-footer\">\n            <button\n              type=\"button\"\n              className=\"btn btn-secondary\"\n              data-dismiss=\"modal\"\n            >\n              Schliessen\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n);\n\nexport default HelpDialog;\n","import React from 'react';\nimport HelpDialog from './Navbar/HelpDialog';\n\ninterface Props {}\n\nconst Navbar: React.FC<Props> = () => (\n  <nav id=\"navbar\" className=\"navbar navbar-light bg-light fixed-top\">\n    {/* <div className=\"container-fluid\"> */}\n    <span className=\"navbar-brand mb-0 h1\">Klassenstufen Teiler</span>\n    <HelpDialog />\n    {/* </div> */}\n  </nav>\n);\n\nexport default Navbar;\n","import React from 'react';\nimport Footer from '../modules/Footer';\nimport Input from '../modules/Input';\nimport Navbar from '../modules/Navbar';\nimport './App.css';\n\nconst App: React.FC<{}> = () => (\n  <>\n    <Navbar />\n    <Input />\n    <Footer />\n  </>\n);\n\nexport default App;\n","import 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap/dist/js/bootstrap.bundle.min.js';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './pages/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.querySelector('#root')\n);\n"],"sourceRoot":""}